{% extends 'base.html' %}
{% block title %}Detalle de publicaci√≥n | Instagram Clone{% endblock %}
{% block content %}
<div class="card mb-4">
  <div class="card-header d-flex align-items-center">
    <img
      src="{{ post.author.profile.profile_picture.url }}"
      class="rounded-circle me-2"
      width="40"
      height="40"
      alt="profile"
    />
    <a
      href="{% url 'feed:profile' post.author.username %}"
      class="fw-bold text-dark text-decoration-none"
      >{{ post.author.username }}</a
    >
    <span class="ms-auto text-muted small"
      >{{ post.created_at|date:"d M Y H:i" }}</span
    >
  </div>
  <img src="{{ post.image.url }}" class="card-img-top" alt="post image" />
  <div class="card-body">
    <p class="card-text">
      <b>{{ post.author.username }}</b> {{ post.caption }}
    </p>
    <form
      action="{% url 'feed:like_post' post.pk %}"
      method="post"
      class="d-inline"
    >
      {% csrf_token %}
      <button type="submit" class="btn btn-link p-0">
        {% if user in post.likes.all %}‚ù§Ô∏è{% else %}ü§ç{% endif %}
      </button>
    </form>
    <span>{{ post.likes.count }} Me gusta</span>
  </div>
  <div class="card-footer">
    <h5>Comentarios</h5>
    {% for comment in comments %}
    <div class="mb-2">
      <b>{{ comment.user.username }}</b>: {{ comment.text }}
      <span class="text-muted small"
        >{{ comment.created_at|date:"d M Y H:i" }}</span
      >
    </div>
    {% empty %}
    <div class="alert alert-info">No hay comentarios.</div>
    {% endfor %}
    <form method="post" class="mt-3">
      {% csrf_token %} {{ comment_form.as_p }}
      <button type="submit" class="btn btn-primary">Comentar</button>
    </form>
  </div>
</div>
{% endblock %}
